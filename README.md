ℹ️ Данный бот разработан @kgritz в рамках выполения лабораторной работы в НИУ ИТМО. Бот использует метод парсинга сайтов для получения необходимой информации о погоде. Источниками такой информации являются сайты pogoda.com и spb.nuipogoda.ru. Все действия являются законными и выполняются в соответвии с правилами данных сайтов.

Отчет
Цель работы 
Знакомство с библиотекой для создания телеграм ботов на языке программирования Python. Создание собственного телеграм бота, присылающего прогноз погоды в Санкт-Петербурге.

Ход работы
Шаг 1 «BotFather»
Перед написанием кода для бота, требовалось создать его «аккаунт» внутри самого телеграма. Для этого нам было необходимо обратиться к @BotFather. Этот инструмент внутри телеграм является официальным способом создания ботов внутри мессенджера:
 
	В результате данных действий мы получили токен, необходимый для взаимодействия нашего «кода» с TelegramAPI, с целью получения запросов пользователей (сообщений) и рассылки ответных запросов. 
	При желании можно боту можно присвоить имя и установить фотографию профиля:
 
 
Шаг 2. «Парсинг»
	Чтобы отправлять пользователю информацию о погоде в Санкт-Петербурге нам потребуется научиться её получать, для этого я выбрал такой способ, как «парсинг» (eng. «parsing» - автоматизированный сбор и структурирование информации с сайтов при помощи программы или сервиса.).  В нашем случае мы напишем свой парсер-функцию внутри файла с алгоритмом самого бота. Сайтами с которых мы будем брать данные, были выбраны pogoda.com и spb.nuipogoda.ru, первый используется для получения актуальной информации о погоде (в данный момент), а второй для получения прогноза на ближайшие 3 дня.
	Данные сайты были выбраны в связи с отсутствием на них «Vue.js» как метода рендера, и упрощенной структурой (легко парсить блоки с необходимыми данными).
	Перед тем как начать парсинг данных с сайта, была проверена законность данного действия.
	На сайте pogoda.com, пользователю разрешается использовать данные с сайта в собственных проектах (в том числе в коммерческих), но с условием - указанием источника. Данная просьба будет удовлетворена при помощи отдельной кнопки в интерфейсе бота.
	Что касается сайта spb.nuipogoda.ru, пользователю требуется получить разрешение на использование данных, а также указывать их источник внутри своего продукта. В связи с этим, мною был направлен запрос на подобное разрешение через электронную почту, а через время был получен положительный ответ: 
СКРИН РАЗРЕШЕНИЯ С ПОЧТЫ
	После урегулирования законодательной базы, перейдем к написанию алгоритма парсера. Для этого мы будем использовать библиотеку beautifulsoup (bs4). За парсинг данных с сайта будут отвечать данные строки кода:
def weather_now():
    weather_pack = []
    url = "https://www.pogoda.com/saint-petersburg.htm"
    r = requests.get(url)
    bs = BeautifulSoup(r.text, "lxml")

def weather_3days():
    weather_pack = []
    url = "https://spb.nuipogoda.ru/погода-на-14-дней"
    r = requests.get(url)
    bs = BeautifulSoup(r.text, "lxml")
	После получения «кода» самих сайтов, мы получаем возможность искать необходимые данные через классы и типы данных, и использовать их в дальнейшем.
Шаг 3. «Написание бота»
	Поскольку для написания бота было принято решение использовать Python, то для взаимодействия с телеграмом мы будем использовать библиотеку telebot. С помощью её инструментария мы будем «подключаться» к боту через ранее полученный токен. А затем, прописав 3 кнопки:
 
встроим в них функции для парсинг-запросов к нужным сайтам (за исключением последней кнопки «Инфо», она будет присылать заранее заготовленный текст.
	Создание функций, отвечающих за создание кнопок, и отправку ответных сообщений является стандартным действие и выполняется по одной из множества инструкций, расположенных в интернете.
	После выполнения всех этих шагов, мы получаем рабочий код телеграм бота, присылающего погоду в Санкт-Петербурге по запросу пользователя. Теперь нам остается загрузить свой код на Github, а при желании использовать бота, загрузить его на сервер или запустить на любой из компьютеров с установленным Python и необходимыми библиотеками, а также с выходом в интернет. Людям, использующим данный код в дальнейшем, стоит также получить разрешение на использование данных с этих сайтов. В репозитории на Github был создан файл README.md, также содержащий информацию об источниках, требуемую владельцами сайтов pogoda.com и spb.nuipogoda.ru.
Вывод
В ходе работы мы научились пользоваться такими библиотеками как telebot (для взаимодействия с телеграмом) и beautifulsoup (для парсинга сайтов), а также успешно написали своего бота телеграм, присылающего по запросу пользователя прогноз погоды в Санкт-Петербурге.

Источники
Парсинг сайтов:
pogoda.com
spb.nuipogoda.ru
Информация об определении «парсинга»:
https://roistat.com/rublog/parsing/
Другие источники:
https://github.com/
https://core.telegram.org/bots/api
https://pypi.org/project/beautifulsoup4/

